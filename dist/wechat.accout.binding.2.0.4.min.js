!function(e){function i(a){if(t[a])return t[a].exports;var s=t[a]={i:a,l:!1,exports:{}};return e[a].call(s.exports,s,s.exports,i),s.l=!0,s.exports}var t={};i.m=e,i.c=t,i.i=function(e){return e},i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)},i.p="",i(i.s=3)}([function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});i.default='<form method="POST" action="https://sso.360che.com/index.php?c=login&m=login&auth=1" autocomplete="off">                <div class="weui_cells_title">手机号码绑定</div>                <div class="weui_cells weui_cells_form">                    <div class="weui_cell">                        <div class="weui_cell_hd"><label class="weui_label">手机号</label></div>                        <div class="weui_cell_bd weui_cell_primary">                            <input class="weui_input" type="tel" name="phone" placeholder="请输入手机号" maxlength="11" />                        </div>                        <div class="weui_cell_ft">                            <i class="weui_icon_warn"></i>                        </div>                    </div>                    <div class="weui_cell weui_vcode">                        <div class="weui_cell_hd"><label class="weui_label">验证码</label></div>                        <div class="weui_cell_bd weui_cell_primary">                            <input class="weui_input" type="tel" name="phonecode" placeholder="请输入验证码" value="" maxlength="4" />                        </div>                        <div class="weui_cell_ft">                            <i class="weui_icon_warn"></i>                            <span class="vcode">获取验证码</span>                        </div>                    </div>                </div>                <input type="hidden" name="referer" value="\'+ location.href +\'" />                <div class="weui_btn_area">                    <a href="javascript:;" class="weui_btn weui_btn_default">取消</a>                    <input type="submit" class="weui_btn weui_btn_disabled weui_btn_primary" value="绑定" disabled />                </div>            </form>            <div class="weui_msg">                <div class="weui_extra_area">                    <a href="javascript:;" class="account_switch">卡车之家账号登录</a>                </div>            </div>'},function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});i.default='<form method="POST" action="https:///sso.360che.com/index.php?c=login&m=login" autocomplete="off">                <div class="weui_cells_title">卡车之家账号登录</div>                <div class="weui_cells weui_cells_form">                    <div class="weui_cell">                        <div class="weui_cell_hd"><label class="weui_label">用户名</label></div>                        <div class="weui_cell_bd weui_cell_primary">                            <input class="weui_input" type="text" name="username" placeholder="请输入您的用户名/手机号">                        </div>                        <div class="weui_cell_ft">                            <i class="weui_icon_warn"></i>                        </div>                    </div>                    <div class="weui_cell">                        <div class="weui_cell_hd"><label class="weui_label">密码</label></div>                        <div class="weui_cell_bd weui_cell_primary">                            <input class="weui_input" type="password" name="password" placeholder="请输入密码">                        </div>                        <div class="weui_cell_ft">                            <i class="weui_icon_warn"></i>                        </div>                    </div>                </div>                <input type="hidden" name="referer" value="\'+ location.href +\'" />                <div class="weui_btn_area">                    <a href="javascript:;" class="weui_btn weui_btn_default">取消</a>                    <input type="submit" class="weui_btn weui_btn_primary weui_btn_disabled" value="登录" disabled />                </div>            </form>            <div class="weui_msg">                <div class="weui_extra_area">                    <a href="javascript:;" class="account_switch">手机号码绑定</a>                </div>            </div>'},function(e,i,t){"use strict";var a=document.createElement("style"),s=document.createElement("link");s.rel="stylesheet",s.href="https://res.wx.qq.com/open/libs/weui/0.4.2/weui.min.css",document.head.appendChild(s),a.innerText='.truckhome-account-binding{position: fixed;left:0;top:0;width:100%;                    height:100%;overflow: hidden;background-color: #fbf9fe;z-index: 1001;                    visibility: hidden;opacity:0;pointer-events: none;-webkit-transform: translate3d(0,100%,0);                    transform: translate3d(0,100%,0);-webkit-transition: all .2s ease-out;transition: all .2s ease-out}                    .truckhome-account-binding.visible{-webkit-transform: translate3d(0,0,0);transform: translate3d(0,0,0);                    opacity: 1;visibility: visible;pointer-events: all;}.weui_vcode .weui_cell_ft .vcode{margin-left: 5px;                    width:107px;height: 44px;line-height:44px;vertical-align: middle;display:inline-block;color:#fff;                    font-size: 14px;text-align: center;background:rgba(4,190,2,1)}.weui_vcode .weui_cell_ft .vcode.disabled{color:#999;background: #f5f5f5}                    .truckhome-account-binding .weui_btn_area{display: -webkit-box;display: -webkit-flex;display: flex;}                    .truckhome-account-binding .weui_btn_area > *{-webkit-box-flex: 1;-webkit-flex: 1;flex: 1}                    .truckhome-account-binding .weui_btn_area input[type="submit"]{margin:0 0 0 10px;border-radius: 5px;}                    .truckhome-account-binding .weui_btn_area input[disabled]{opacity: 1}.truckhome-account-binding .weui_label{width:80px}',document.head.appendChild(a)},function(e,i,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(){alert(123);var e=document.querySelector("#truckhome_account_binding"),i=document.cookie,t=i.match(/AbcfN_unionid=([^;$]+)/),a=i.match(/AbcfN_ajaxuid=([^;$]+)/);t&&t[1]&&Object.defineProperty(window,"UNIONID",{writable:!1,value:t[1]}),a&&a[1]&&Object.defineProperty(window,"USERID",{writable:!1,value:a[1]}),e||(e=document.createElement("div"),e.className="truckhome-account-binding",e.addEventListener("touchmove",function(e){e.preventDefault()}),document.body.appendChild(e));var s={init:function(){window.USERID?(this.OAuthStatus=!0,this.signStatus=!0,this.BindStatus=!0):(this.mode="binding",e.classList.contains("visible")&&e.classList.remove("visible"),window.UNIONID?(this.OAuthStatus=!0,this.checkBind()):this.checkOAuth(),this.onInputHandle())},checkBind:function(){var e=this;$.ajax({url:"https://sso.360che.com/index.php?c=weChatOauthUrl&m=getBindStatus",dataType:"jsonp",success:function(i){if("err"==i.status){e.BindStatus=!1;try{var t=localStorage.getItem("truckhomeAccountBinding");t&&(t=JSON.parse(t),e.show(t.callback||""))}catch(e){}}else e.BindStatus=!0,e.signStatus||(location.href="https://sso.360che.com/index.php?c=login&referer="+location.href)}})},checkOAuth:function(){var e=this;$.ajax({url:"https://sso.360che.com/index.php?c=weChatOauthUrl&m=getAuthUrl",dataType:"jsonp",success:function(i){"err"==i.status?(e.OAuthStatus=!0,e.checkBind()):(e.OAuthStatus=!1,e.OAuthUrl=i.info.url)}})},checkPhoneCodeType:function(){var e=this;$.ajax({url:"https://sso.360che.com/?c=api&m=getPhoneCodeType&tel=18001352341&source=log",dataType:"jsonp",success:function(i){"err"==i.status?e.error(i.msg):"1"==i.info.codeType?e.codeTypeUrl="https://sso.360che.com/index.php?c=phone&m=getPhoneCodeByLogin":e.codeTypeUrl="https://sso.360che.com/index.php?c=sms&m=getSmsCodeByLogin"},error:function(){e.error("网络不给力，请稍后重试")}})},show:function(i){if(this.OAuthStatus){try{localStorage.getItem("truckhomeAccountBinding")&&localStorage.removeItem("truckhomeAccountBinding")}catch(e){}this.BindStatus?i&&Function.isFunction(i)&&i():(e.classList.add("visible"),location.hash="#"+this.mode,this.checkPhoneCodeType(),e.innerHTML||(e.innerHTML=l.default),i&&(this.submitCallback=i),window.ga&&ga("send","event","登录流程","跳出手机号绑定弹层"))}else{var t={truckhomeAccountBinding:1};i&&(t.callback=i),localStorage.setItem("truckhomeAccountBinding",JSON.stringify(t)),setTimeout(function(){location.href=s.OAuthUrl},20)}},hide:function(){e.classList.remove("visible"),location.hash=""},switch:function(){switch(this.mode){case"binding":e.innerHTML=c.default,this.mode="signin",window.ga&&ga("send","event","登录流程","点击卡车之家账号登录");break;case"signin":e.innerHTML=l.default,this.mode="binding"}},error:function(e,i){var t=this;if(this.toptips||(this.toptips=document.createElement("div"),this.toptips.className="weui_toptips weui_warn js_tooltips",this.toptips.style.zIndex="1002",document.body.appendChild(this.toptips)),this.toptips.innerHTML=e,this.toptips.style.display="block",this.errorTimer&&clearTimeout(this.errorTimer),this.errorTimer=setTimeout(function(){t.toptips.style.display="none"},2e3),i){var a=i.parentNode.parentNode;a&&a.classList.add("weui_cell_warn")}},toast:function(e,i,t){function a(e){return'<p class="weui_toast_content">'+e+"</p>"}if(this._toast||(this._toast=document.createElement("div"),this._toast.innerHTML='<div class="weui_mask_transparent"></div><div class="weui_toast"></div>',document.body.appendChild(this._toast)),i){var s=this._toast.querySelector(".weui_toast");switch(e){case"loading":this._toast.className="weui_loading_toast",s.innerHTML='<div class="weui_loading"><div class="weui_loading_leaf weui_loading_leaf_0"></div><div class="weui_loading_leaf weui_loading_leaf_1"></div><div class="weui_loading_leaf weui_loading_leaf_2"></div><div class="weui_loading_leaf weui_loading_leaf_3"></div><div class="weui_loading_leaf weui_loading_leaf_4"></div><div class="weui_loading_leaf weui_loading_leaf_5"></div><div class="weui_loading_leaf weui_loading_leaf_6"></div><div class="weui_loading_leaf weui_loading_leaf_7"></div><div class="weui_loading_leaf weui_loading_leaf_8"></div><div class="weui_loading_leaf weui_loading_leaf_9"></div><div class="weui_loading_leaf weui_loading_leaf_10"></div><div class="weui_loading_leaf weui_loading_leaf_11"></div></div>'+a(t);break;default:this._toast.className="",s.innerHTML='<i class="weui_icon_toast"></i>'+a(t);var n=this._toast;setTimeout(function(){n.style.display="none"},1e3)}this._toast.style.display="block"}else this._toast.style.display="none"},vcode:function(i){var t=this,a=e.querySelector("form"),s=a.elements.phone,n=a.data.phone,l=new RegExp("^1(([38]\\d)|(4[57])|(5[012356789])|(7[01678]))\\d{8}$");return n?l.test(n)?(this.speed=61,void $.ajax({url:t.codeTypeUrl,data:{tel:a.data.phone},dataType:"jsonp",success:function(e){"err"==e.status?t.error(e.msg):(i.classList.add("disabled"),t.countdown(i))},error:function(){t.error("网络不给力，请稍后重试")}})):void this.error("手机号码格式错误",s):void this.error("请填写手机号",s)},countdown:function(e){var i=this;if(this.countdownTimer&&clearTimeout(this.countdownTimer),1==this.speed)e.classList.remove("disabled"),e.innerHTML="重新获取";else{this.speed-=1;var t=this.speed+"";t=1==t.length?"0"+t:t,e.innerHTML="重新获取("+t+")",this.countdownTimer=setTimeout(function(){i.countdown(e)},1e3)}},onInputHandle:function(){var i=this;e.addEventListener("input",function(e){var t=e.target;if("INPUT"==t.tagName&&("tel"==t.type||"password"==t.type||"text"==t.type)){var a=t.parentNode.parentNode;a&&a.classList.contains("weui_cell_warn")&&a.classList.remove("weui_cell_warn"),i.checkSubmit()}})},checkSubmit:function(){var i=e.querySelector("form"),t=i.querySelector('form input[type="submit"]');switch(this.mode){case"binding":i.data.phone&&11==i.data.phone.length&&i.data.phonecode&&4==i.data.phonecode.length?this.enabled(t):this.disabled(t);break;case"signin":i.data.username&&i.data.password?this.enabled(t):this.disabled(t)}},enabled:function(e){e.disabled=!1,e.classList.remove("weui_btn_disabled")},disabled:function(e){e.disabled=!0,e.classList.add("weui_btn_disabled")},submit:function(e,i){e.preventDefault();var t=i.querySelector('input[type="submit"]'),a=this;this.disabled(t),this.toast("loading",!0,"提交中，请稍后..."),$.ajax({url:i.action,data:i.data,dataType:"jsonp",success:function(e){"ok"==e.status?(a.hide(),a.toast("infor",!0,e.msg),window.location.reload()):(a.enabled(t),a.error(e.msg)),a.toast("loading",!1),window.ga&&ga("send","event","登录流程","绑定成功")},error:function(){a.enabled(t),a.error("网络不给力，请稍后重试"),a.toast("loading",!1)}})},cancel:function(){location.hash||s.hide()}};s.init(),e.addEventListener("submit",function(e){var i=e.target;"FORM"==i.tagName&&s.submit(e,i)}),e.addEventListener("click",function(e){var i=e.target;"A"==i.tagName&&("account_switch"==i.className&&s.switch(),"weui_btn weui_btn_default"==i.className&&s.hide()),"SPAN"==i.tagName&&"vcode"==i.className&&s.vcode(i)}),window.addEventListener("hashchange",function(){s.cancel()}),window.truckhomeAccountBinding=s}var n=t(0),l=a(n),o=t(1),c=a(o),d=t(2);a(d);if(window.define)s();else{var u=document.createElement("script");u.src="https://s.kcimg.cn/public/m/js/t.min.js",u.onload=function(){s()},document.body.appendChild(u)}}]);